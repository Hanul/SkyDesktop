SkyDesktop.Button=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{padding:"11px 15px",backgroundColor:"#e0e1e2",color:"#333",fontWeight:"bold",borderRadius:4},spacing:10,on:{mouseover:(e,o)=>{o.addStyle({backgroundColor:"#cacbcd"})},mouseout:(e,o)=>{o.addStyle({backgroundColor:"#e0e1e2"})}}}}}),SkyDesktop.Noti=METHOD({run:e=>{let o=UUI.PANEL({style:{zIndex:999,position:"fixed",right:10,bottom:10,backgroundColor:"#FFFFCC",color:"#333",borderRadius:5},contentStyle:{padding:"5px 10px"},c:e}).appendTo(BODY);UANI.SHOW_SLIDE_UP({node:o}),DELAY(2,()=>{UANI.HIDE_SLIDE_DOWN({node:o},o.remove)})}}),SkyDesktop.Alert=CLASS({preset:()=>{return UUI.ALERT},params:()=>{return{style:{zIndex:999,backgroundColor:"#fff",color:"#333",textAlign:"center",border:"1px solid #333",borderRadius:5,boxShadow:"0 0 5px rgba(0,0,0,0.3)",onDisplayResize:(e,o)=>{return e>300?{width:280}:{width:"90%"}}},contentStyle:{padding:20},buttonStyle:{borderTop:"1px solid #999",padding:"11px 0",backgroundColor:"#e0e1e2",color:"#333",fontWeight:"bold",borderRadius:"0 0 5px 5px"}}},init:(e,o)=>{o.getButton().on("mouseover",(e,o)=>{o.addStyle({backgroundColor:"#cacbcd"})}),o.getButton().on("mouseout",(e,o)=>{o.addStyle({backgroundColor:"#e0e1e2"})})}}),SkyDesktop.Confirm=CLASS({preset:()=>{return UUI.CONFIRM},params:()=>{return{style:{zIndex:999,backgroundColor:"#fff",color:"#333",textAlign:"center",border:"1px solid #333",borderRadius:5,boxShadow:"0 0 5px rgba(0,0,0,0.3)",onDisplayResize:(e,o)=>{return e>300?{width:280}:{width:"90%"}}},contentStyle:{padding:20},okButtonStyle:{flt:"left",borderTop:"1px solid #999",padding:"11px 0",backgroundColor:"#e0e1e2",color:"#333",fontWeight:"bold",width:"50%",borderRadius:"0 0 0 5px"},cancelButtonStyle:{flt:"right",marginLeft:-1,borderLeft:"1px solid #999",borderTop:"1px solid #999",padding:"11px 0",backgroundColor:"#e0e1e2",color:"#333",fontWeight:"bold",width:"50%",borderRadius:"0 0 5px 0"}}},init:(e,o)=>{o.getOkButton().on("mouseover",(e,o)=>{o.addStyle({backgroundColor:"#cacbcd"})}),o.getOkButton().on("mouseout",(e,o)=>{o.addStyle({backgroundColor:"#e0e1e2"})}),o.getCancelButton().on("mouseover",(e,o)=>{o.addStyle({backgroundColor:"#cacbcd"})}),o.getCancelButton().on("mouseout",(e,o)=>{o.addStyle({backgroundColor:"#e0e1e2"})})}}),SkyDesktop.Prompt=CLASS({preset:()=>{return UUI.PROMPT},params:()=>{return{style:{zIndex:999,backgroundColor:"#fff",color:"#333",textAlign:"center",border:"1px solid #333",borderRadius:5,boxShadow:"0 0 5px rgba(0,0,0,0.3)",onDisplayResize:(e,o)=>{return e>300?{width:280}:{width:"90%"}}},contentStyle:{padding:20,paddingBottom:10},formStyle:{padding:20,paddingTop:0},inputStyle:{borderTop:"1px solid #999",padding:8,border:"1px solid #999",borderRadius:4},okButtonStyle:{flt:"left",borderTop:"1px solid #999",padding:"11px 0",backgroundColor:"#e0e1e2",color:"#333",fontWeight:"bold",width:"50%",borderRadius:"0 0 0 5px"},cancelButtonStyle:{flt:"right",marginLeft:-1,borderLeft:"1px solid #999",borderTop:"1px solid #999",padding:"11px 0",backgroundColor:"#e0e1e2",color:"#333",fontWeight:"bold",width:"50%",borderRadius:"0 0 5px 0"}}},init:(e,o,t)=>{o.append(t),o.getOkButton().on("mouseover",(e,o)=>{o.addStyle({backgroundColor:"#cacbcd"})}),o.getOkButton().on("mouseout",(e,o)=>{o.addStyle({backgroundColor:"#e0e1e2"})}),o.getCancelButton().on("mouseover",(e,o)=>{o.addStyle({backgroundColor:"#cacbcd"})}),o.getCancelButton().on("mouseout",(e,o)=>{o.addStyle({backgroundColor:"#e0e1e2"})})}}),SkyDesktop.ContextMenu=CLASS(e=>{let o;return{preset:()=>{return UUI.LIST},params:()=>{return{style:{zIndex:999,position:"fixed",backgroundColor:"#F2F2F2",border:"1px solid #ccc",color:"#000"},on:{tap:e=>{e.stop()}}}},init:(e,t,n)=>{let i=n.e;void 0!==o&&o.remove(),o=t,t.addStyle({left:i.getLeft(),top:i.getTop()}),t.appendTo(BODY);let r=EVENT("tap",()=>{o.remove()});t.on("remove",()=>{r.remove()})}}}),SkyDesktop.ContextMenuItem=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{padding:"5px 15px",minWidth:200},spacing:10,on:{mouseover:(e,o)=>{o.addStyle({backgroundColor:"#91C9F7"})},mouseout:(e,o)=>{o.addStyle({backgroundColor:"transparent"})}}}}}),SkyDesktop.File=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{marginLeft:20,padding:"2px 5px",cursor:"default"},icon:IMG({src:SkyDesktop.R("file.png")}),spacing:5,on:{mouseover:(e,o)=>{o.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(e,o)=>{o.addStyle({backgroundColor:"transparent"})}}}},init:(e,o,t)=>{let n;void 0!==t&&(n=t.path);o.getPath=(()=>{return n})}}),SkyDesktop.FileTree=CLASS({preset:()=>{return UUI.LIST},params:()=>{return{style:{paddingBottom:50}}},init:(e,o,t)=>{let n;OVERRIDE(o.addItem,e=>{n=o.addItem=(o=>{let n=o.key,i=o.item;i.checkIsInstanceOf(SkyDesktop.File)===!0?i.on("doubletap",()=>{t(n)}):i.checkIsInstanceOf(SkyDesktop.Folder)===!0&&i.setLoad(t),e(o),EVENT.fireAll("resize")})})}}),SkyDesktop.Folder=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{position:"relative",marginLeft:20,padding:"2px 5px",cursor:"default"},listStyle:{marginLeft:20},icon:IMG({src:SkyDesktop.R("folder.png")}),spacing:5,on:{mouseover:(e,o)=>{o.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(e,o)=>{o.addStyle({backgroundColor:"transparent"})}}}},init:(e,o,t)=>{let n,i,r;void 0!==t&&(n=t.listStyle,i=t.isOpened,r=t.path);let d,c;o.append(c=UUI.ICON_BUTTON({style:{position:"absolute",left:-12,top:3,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"},icon:FontAwesome.GetIcon("chevron-right"),on:{mouseover:(e,o)=>{o.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#999"}),e.stop()},mouseout:(e,o)=>{o.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"}),e.stop()},tap:e=>{u.checkIsShowing()===!0?s():a(),e.stop()}}}));let u=UUI.LIST({style:n});o.after(u);let a=(o.setLoad=(e=>{d=e}),o.open=(()=>{u.show(),o.setIcon(IMG({src:SkyDesktop.R("folder-opened.png")})),c.setIcon(FontAwesome.GetIcon("chevron-down")),c.addStyle({left:-14,top:1}),o.fireEvent("open")})),s=o.close=(()=>{u.hide(),o.setIcon(IMG({src:SkyDesktop.R("folder.png")})),c.setIcon(FontAwesome.GetIcon("chevron-right")),c.addStyle({left:-12,top:2}),o.fireEvent("close")});i===!0?DELAY(()=>{a()}):u.hide(),o.on("doubletap",()=>{u.checkIsShowing()===!0?s():a()}),o.on("remove",()=>{DELAY(()=>{u.remove()})});let l=o.addItem=(e=>{let o=e.key,t=e.item;t.checkIsInstanceOf(SkyDesktop.File)===!0?t.on("doubletap",()=>{d(o)}):t.checkIsInstanceOf(SkyDesktop.Folder)===!0&&t.setLoad(d),u.addItem(e),EVENT.fireAll("resize")});void 0!==t&&void 0!==t.items&&EACH(t.items,(e,o)=>{l({key:o,item:e})});o.removeItem=(e=>{u.removeItem(e)}),o.removeAllItems=(()=>{u.removeAllItems()}),o.getPath=(()=>{return r})}}),SkyDesktop.HorizontalTabList=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(e,o,t)=>{let n=[],i=[],r=CLEAR_BOTH(),d=()=>{let e=0,t=0;EACH(n,o=>{void 0===o.getSize()?t+=1:e+=o.getSize(),o.addStyle({width:0,height:0})}),EACH(i,e=>{e.addStyle({height:0})});let r=o.getHeight(),d=e/(n.length-t);e+=d*t,EACH(n,t=>{void 0===t.getSize()&&t.setSize(d),t.addStyle({width:(o.getWidth()-8*(n.length-1))*t.getSize()/e,height:r})}),EACH(i,e=>{e.addStyle({height:r})})},c=o.addTab=(e=>{if(n.length>0){let t,r,d,c=n[n.length-1];o.append(t=DIV({style:{flt:"left",width:8,height:"100%",cursor:"e-resize"},on:{touchstart:o=>{let t=o.getLeft(),n=c.getWidth(),i=e.getWidth();BODY.addStyle({cursor:"e-resize"}),void 0!==r&&r.remove(),r=EVENT("touchmove",o=>{let r=o.getLeft()-t;n+r<100&&(r=100-n),i-r<100&&(r=i-100),c.addStyle({width:n+r}),e.addStyle({width:i-r})}),void 0!==d&&d.remove(),d=EVENT("touchend",()=>{BODY.addStyle({cursor:"auto"}),c.setSize(c.getSize()*c.getWidth()/n),e.setSize(e.getSize()*e.getWidth()/i),r.remove(),r=void 0,d.remove(),d=void 0}),o.stop()}}})),i.push(t)}e.addStyle({flt:"left"}),o.append(e),o.append(r),n.push(e),d()});void 0!==t&&void 0!==t.tabs&&EACH(t.tabs,c),o.on("show",d),DELAY(d);let u=EVENT("resize",d);o.on("remove",()=>{u.remove(),u=void 0})}}),SkyDesktop.Tab=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",overflow:"auto",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#000":"#fff",color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#fff":"#000"}}},init:(e,o,t)=>{let n,i,r,d;void 0!==t&&(n=t.icon,i=t.title,r=t.size,d=t.isCannotClose);o.setIcon=(e=>{n=e,o.fireEvent("iconchange")}),o.getIcon=(()=>{return n}),o.setTitle=(e=>{i=e,o.fireEvent("titlechange")}),o.getTitle=(()=>{return i}),o.setSize=(e=>{r=e}),o.getSize=(()=>{return r}),o.checkIsCannotClose=(()=>{return d})}}),SkyDesktop.TabGroup=CLASS({preset:()=>{return TABLE},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(e,o,t)=>{let n;void 0!==t&&(n=t.homeTab);let i,r=[],d=[],c=-1,u=CLEAR_BOTH();TR({c:i=TD({style:{height:27}})}).appendTo(o);let a;TR({c:a=TD({c:n})}).appendTo(o);let s=o.activeTab=(e=>{c=e,EACH(r,e=>{e.addStyle({backgroundColor:"transparent"})}),EACH(d,e=>{e.hide()}),r[e].addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#000":"#fff"}),d[e].show()}),l=(o.getActiveTab=(()=>{return d[c]}),o.getAllTabs=(()=>{return d}),o.removeAllTabs=(()=>{EACH(r,e=>{e.remove()}),EACH(d,e=>{e.remove()}),r=[],d=[],c=-1}),o.addTab=(e=>{let o;i.append(o=UUI.BUTTON_H({style:{padding:"5px 10px",height:17,flt:"left",cursor:"default"},icon:e.getIcon(),spacing:5,on:{mouseover:()=>{c!==FIND({array:d,value:e})&&o.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:()=>{c!==FIND({array:d,value:e})&&o.addStyle({backgroundColor:"transparent"})},tap:()=>{s(FIND({array:d,value:e}))}}})),i.append(u),r.push(o),e.on("iconchange",()=>{o.setIcon(e.getIcon())}),e.on("titlechange",()=>{o.setTitle(SPAN({c:e.checkIsCannotClose()===!0?e.getTitle():[e.getTitle(),UUI.ICON_BUTTON({style:{marginLeft:10,color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"},icon:FontAwesome.GetIcon("times"),on:{mouseover:(e,o)=>{o.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#999"})},mouseout:(e,o)=>{o.addStyle({color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#444":"#ccc"})},tap:()=>{e.remove()}}})]}))}),e.fireEvent("titlechange"),a.append(e),d.push(e),s(d.length-1),EVENT.fireAll("resize"),e.on("remove",()=>{let o=FIND({array:d,value:e});void 0!==o&&(r[o].remove(),r.splice(o,1),d[o].remove(),d.splice(o,1),o<=c&&(c-1>=0?s(c-1):d.length>0?s(0):c=-1)),e=void 0})}));void 0!==t&&(void 0!==t.tabs&&EACH(t.tabs,l),void 0!==t.activeTabIndex&&s(t.activeTabIndex))}}),SkyDesktop.VerticalTabList=CLASS({preset:()=>{return DIV},params:()=>{return{style:{height:"100%",backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#333":"#ccc"}}},init:(e,o,t)=>{let n=[],i=()=>{let e=0,t=0;EACH(n,o=>{void 0===o.getSize()?t+=1:e+=o.getSize(),o.addStyle({height:0})});let i=e/(n.length-t);e+=i*t,EACH(n,t=>{void 0===t.getSize()&&t.setSize(i),t.addStyle({height:(o.getHeight()-10*(n.length-1))*t.getSize()/e})})},r=o.addTab=(e=>{if(n.length>0){let t,i,r=n[n.length-1];o.append(DIV({style:{height:8,cursor:"n-resize"},on:{touchstart:o=>{let n=o.getTop(),d=r.getHeight(),c=e.getHeight();BODY.addStyle({cursor:"n-resize"}),void 0!==t&&t.remove(),t=EVENT("touchmove",o=>{let t=o.getTop()-n;d+t<100&&(t=100-d),c-t<100&&(t=c-100),r.addStyle({height:d+t}),e.addStyle({height:c-t})}),void 0!==i&&i.remove(),i=EVENT("touchend",()=>{BODY.addStyle({cursor:"auto"}),r.setSize(r.getSize()*r.getHeight()/d),e.setSize(e.getSize()*e.getHeight()/c),t.remove(),t=void 0,i.remove(),i=void 0}),o.stop()}}}))}o.append(e),n.push(e),i()});void 0!==t&&void 0!==t.tabs&&EACH(t.tabs,r),o.on("show",i),DELAY(i);let d=EVENT("resize",i);o.on("remove",()=>{d.remove(),d=void 0})}}),SkyDesktop.Toolbar=CLASS({preset:()=>{return UUI.V_CENTER},params:()=>{return{style:{backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#666":"#ccc",color:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#fff":"#000",height:"100%",borderBottom:"1px solid #999"}}},init:(e,o,t)=>{let n=CLEAR_BOTH(),i=()=>{let e=0;EACH(o.getChildren(),e=>{e.checkIsInstanceOf(SkyDesktop.ToolbarButton)===!0&&e.showTitle()}),EACH(o.getChildren(),o=>{o.checkIsInstanceOf(SkyDesktop.ToolbarButton)===!0&&(e+=o.getWidth())}),o.getWidth()<e&&EACH(o.getChildren(),e=>{e.checkIsInstanceOf(SkyDesktop.ToolbarButton)===!0&&e.hideTitle()})},r=o.addButton=(e=>{o.append(e),o.append(n),i()});void 0!==t&&void 0!==t.buttons&&EACH(t.buttons,r),o.on("show",i),DELAY(i);let d=EVENT("resize",i);o.on("remove",()=>{d.remove(),d=void 0})}}),SkyDesktop.ToolbarButton=CLASS({preset:()=>{return UUI.BUTTON_H},params:()=>{return{style:{flt:"left",padding:"5px 8px"},spacing:5,on:{mouseover:(e,o)=>{o.addStyle({backgroundColor:void 0!==BROWSER_CONFIG.SkyDesktop&&"dark"===BROWSER_CONFIG.SkyDesktop.theme?"#003333":"#AFCEFF"})},mouseout:(e,o)=>{o.addStyle({backgroundColor:"transparent"})}}}}});